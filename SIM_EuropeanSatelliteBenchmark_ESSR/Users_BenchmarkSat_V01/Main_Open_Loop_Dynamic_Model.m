%% -----------------------------------------------------------------------
% The matlab code "Synthesis_Model_NoFilter_SIM01" is used to build the
% synthesis model without the input/output weighting filters
% User can select the inputs/outputs of the model to be generated by means
% of an GUI.

% Input: 
%       LFT/LPV model (Provided as .mat file)

% The code reads the .mat file with name provided in the variable
% "Model_Name"

% Output:

%       Synthesis model and other data saved in .mat file
%       "SynthesisModel_NoWeights_DATE" in folder <Solutions_freqDomain>

%-------------------------------------------------------------------------
% Copyright (c) ISAE-SUPAERO, All Rights Reserved.
% Paolo Iannelli, Francesco Sanfedino, Daniel Alazard (2024)

% All folders and files in this forder are licenced under the 
% European Space Agency Public Licence - v2.4 - Permissive (Type 3) 
% [https://essr.esa.int/license/european-space-agency-public-license-v2-4-permissive-type-3]

% The development of this software was possible thanks to the
% ESA Contract No. 4000141060/23/NL/MGu.

% IMPORTANT: Any use of the present software (i.g. presentations, official documents, 
% scientific article or report) should be correctly referred to as follows:
% "Sanfedino, F. and Iannelli, P. and Alazard, D. and Pelletier, Ã‰. 
% and Bennani, S. and Girouart, B., European Satellite Benchmark 
% for Control Education and Industrial Training, IFAC-PapersOnLine, 
% Volume 58, Issue 16, 2024, pp. 193-198" 
%-------------------------------------------------------------------------

%% -----------------------------------------------------------------------

clear all, close all

addpath(genpath('./SDT_model/'));  % Add the folder with the file for
                                         % Frequency domain analysis
addpath(genpath('./Synthesis_model/'));  % Add the folder with the file for
                                         % Frequency domain analysis
addpath(genpath('./Utilities/')); % Add the folder with SDTlib and other used
                                  % functions in the matlab path
addpath(genpath('./Solutions_freqDomain/')); % Add the folder with the solutions


%% -------------------------------------------------------------------------
% Load LFT/LPV model of the spacecraft
%--------------------------------------------------------------------------                                        

% The uss model Gu is loaded (together with the other structures of the
% model) - CHECK TABLE IN USER MANUAL FOR DESCRIPTION
Model_Name='LFT_LPV_spacecraftModel_Users_2024-07-30_13h57m17s';

load(Model_Name,'Benchmark','Bus','data_syn','FSM','Gum_IOselected','Gu','HGA','ISOL',...
                'MPS','PAYLOAD','PMA','RWIsol','RWS','SA','SADM','slosh','thr');

% Name of the simulink file for synthesis design without weigthing filters
File_synthesis_Name='General_OL_model_NoFilters'; % Name of the slx file for the synthesis model

% Launch GUI
GUI_open_loop
